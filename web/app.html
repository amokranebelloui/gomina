<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Hello World</title>
    <!--
    <script src="/lib/react.js"></script>
    <script src="/lib/react-dom.js"></script>
    <script src="/lib/babel.min.js"></script>
    <script type="text/babel" src="/components/gomina.js"></script>
    <script type="text/babel" src="/components/layout.js"></script>
    -->
    <!--script src="https://npmcdn.com/react-router@2.4.0/umd/ReactRouter.min.js"></script--><!--
    <script src="https://unpkg.com/react-router/umd/react-router.min.js"></script>
    <script src="https://unpkg.com/react-router-dom/umd/react-router-dom.min.js"></script>
              -->






    <!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.2/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.2/react-dom.js"></script>
    -->

    <!--
    <script src="https://npmcdn.com/react-router/umd/ReactRouter.min.js"></script>
    -->

    <!--
    <script src="https://npmcdn.com/history/umd/History.min.js"></script>
    <script src="https://unpkg.com/history/umd/history.min.js"></script>
    -->

    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script src="https://unpkg.com/react@15.3.1/dist/react.js"></script>
    <script src="https://unpkg.com/react-dom@15.3.1/dist/react-dom.js"></script>
    <script src="https://unpkg.com/react-router@4.2.0/umd/react-router.js"></script>
    <script src="https://unpkg.com/react-router-dom@4.2.2/umd/react-router-dom.js"></script>
    <script src="https://unpkg.com/history@4.7.2/umd/history.min.js"></script>
</head>
<body>
<div id="root"></div>
<script type="text/babel">

    //import { BrowserRouter, Switch, Route, NavLink } from 'react-router-dom'

    var Router = ReactRouter.Router;
    var BrowserRouter = ReactRouterDOM.BrowserRouter;
    var Switch = ReactRouter.Switch;
    var Route = ReactRouter.Route;
    var Link = ReactRouterDOM.Link;
    var NavLink = ReactRouterDOM.NavLink;
    //const history = History.createHistory;
    const history = History.createBrowserHistory();
    //const history = History.createHashHistory();

    console.info(Router);
    console.info(history);
    console.info(Route);
    console.info(Link);

    function Index(props) {
        console.info('index');
        return (
                <div>
                    Index
                </div>
        );
    }

    function Home(props) {
        console.info('home');
        return (
                <div>
                    Home
                </div>
        );
    }

    function About(props) {
        console.info('about');
        return (
                <div>
                    <Switch>
                        <Route path="/app/about/detail/:id" component={About2}/>
                        <Route path="/app/about" component={About1}/>
                    </Switch>
                </div>
        );
    }

    function About1(props) {
        console.info('about1');
        return (
                <div>
                    About1
                </div>
        );
    }

    function About2(props) {
        console.info('about2', props.match);
        return (
                <div>
                    About2
                    <br />
                    {props.match.params.id}
                </div>
        );
    }

    class Blocker extends React.Component {
        render() {
            console.info('blocker');
            return (
                <div>
                    <Link to="/app/">index</Link> -&nbsp;
                    <Link to="/app/home">home</Link> -&nbsp;
                    <Link to="/app/about">about</Link> -&nbsp;
                    <Link to="/app/about/detail/amokrane">about amokrane</Link> -&nbsp;
                    <Link to="/app/about/detail/jim">about jim</Link>&nbsp;
                    <br/>
                    {this.props.location.pathname} *
                    <hr/>

                    <Route exact path="/app" component={Index}/>
                    <Route path="/app/home" component={Home}/>
                    <Route path="/app/about" component={About}/>
                    <hr/>
                </div>
            );
        }
    }

    class Application extends React.Component {
        render() {
            // Wrapping in the Route injects the location -> Blocker Component and forces a refresh
            console.info('application');
            return (
                <Router path="/app" history={history}>
                    <Route component={Blocker} />
                </Router>
            );
        }
    }

    ReactDOM.render(<Application />, document.getElementById('root'));

</script>

</body>
</html>
